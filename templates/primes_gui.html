<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>primes</title>
  </head>
  <body>
    <script>
      var worker,lastNum,currentNumber,lastResult;
      
      var isRunning=false;
      var numbersComputed=0;
      function compute(num){
        return num;
      }
      
      function startStop(){
        if(isRunning){
          document.getElementById("start_stop").innerHTML='stop';
          failJob(lastNum);
          worker.terminate();
          
        }else{
          document.getElementById("start_stop").innerHTML='start';
          worker=new Worker("../static/primeWorker.js");
          worker.onmessage=(e)=>{
            
            var data=JSON.parse(e.data);
            console.log("message is: "+JSON.stringify(data));
            console.log("keys is: "+data["lastNumber"]);
            
            lastNum=data['lastNumber'];
            lastResult=data['lastResult'];
            currentNumber=data['currentNumber'];
            document.getElementById('currentNumber').innerHTML=currentNumber;
            document.getElementById("numbersComputed").innerHTML=++numbersComputed;
          };
        }
        isRunning=!isRunning;
      }
    </script>
    <div class="current-number">
      <p>current number: </p>
      <p id="currentNumber"></p>
    </div>
    <div class="numComputed">
      <p>you have computed: </p>
      <p id="numbersComputed">0</p>
    </div>
    <div class="controls">
      <button id="start_stop" onclick="startStop();">start</button>
    </div>
  </body>
</html>
